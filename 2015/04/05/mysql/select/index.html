<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="www.lizs.cc"><meta name="keywords" content="lizs, www.lizs.cc, lizs.cc"><title>MySQL - SELECT - lizs</title><!-- link(rel="stylesheet", type="text/css", href="//fonts.neworld.org/css?family=Source+Code+Pro")--><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><!-- #header--><div id="layout" class="layout-g"><div class="layout-r"><div id="sidebar"><div class="site-name"><h1 class="title"><a href="/." class="home">lizs</a></h1><!-- h1.hidden= current_title--><!-- a#logo(href=url_for('.'))= config.title--><p class="description">www.lizs.cc</p></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="www.lizs.cc"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="time">{date}</div><div class="title">{title}</div><!-- .tags {tags}--></a></div></template></div></div><!-- .search-pla--><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 近期文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/01/python/abstract_base_classes/">Python - Abstract Base Classes</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/05/linux/centos6.6_upgrade_python2.6/">CentOS6.6 upgrade Python2.6 to Python2.7</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/05/linux/centos6.6_deploy_php_mysql_nginx/">CentOS6.6 install PHP, MySQL and Nginx</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/05/linux/cmd_netstat/">Linux command - netstat</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/03/python/http_server/">Python - HTTP Server</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/02/python/socket_server/">Python - Socket Server</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cordova/">Cordova</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP/IP</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/cmd/" style="font-size: 15px;">cmd</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/tutorial/" style="font-size: 15px;">tutorial</a> <a href="/tags/cordova/" style="font-size: 15px;">cordova</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/others/" style="font-size: 15px;">others</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/tcp-ip/" style="font-size: 15px;">tcp/ip</a> <a href="/tags/django/" style="font-size: 15px;">django</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li></ul></div><div id="nav-menu"></div></div></div><div class="layout-l"><div class="content_container"><div class="post"><div class="header"><h1 class="post-title">MySQL - SELECT</h1><div class="post-meta"><p><span class="date">2015-04-05</span><span><a href="/categories/MySQL/" class="category">MySQL</a></span><span class="view_count"><i id="busuanzi_container_page_pv"><!-- i=  __('hits') + '数: '--><i id="busuanzi_value_page_pv"></i></i></span></p></div></div><div class="post-content"><p>select 的 5 种子句:</p>
<ul>
<li>where：条件查询</li>
<li>group by：分组</li>
<li>having：筛选</li>
<li>order by：排序</li>
<li>limit：限制结果条数</li>
</ul>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">where</span><br><span class="line">    where 条件</span><br><span class="line"></span><br><span class="line">where常用运算符：</span><br><span class="line">    =：等于    &lt;：小于    &gt;：大于    &lt;=：小于或等于    &gt;=：大于或等于</span><br><span class="line">    != 或 &lt;&gt;：不等于    in：在某集合内    between：在某范围内</span><br><span class="line"></span><br><span class="line">where逻辑运算符：</span><br><span class="line">    and 或 &amp;&amp;：与</span><br><span class="line">    or 或 ||： 或</span><br><span class="line">    not 或 !： 非</span><br><span class="line"></span><br><span class="line">    in：在某集合内，是对一个集合来操作的。而between对某个范围内的。</span><br><span class="line">in(值1，值2...值n)</span><br><span class="line">//查询goods中id等于3、5或者6的商品</span><br><span class="line">select id,name,price from goods where id in(3,5,6);</span><br><span class="line">between 值1 and 值2</span><br><span class="line">//查询goods中id在3-6这个范围的上面</span><br><span class="line">select id,name,price from goods where id between 3 and 6;</span><br><span class="line">或者：</span><br><span class="line">select id,name,price from goods where id&gt;=3 and id&lt;=6;</span><br><span class="line">优先级别：not &gt; and &gt; or</span><br><span class="line">//查询2-4和5-7的商品</span><br><span class="line">select * from goods where id&gt;=2 and id&lt;=4 or id&gt;=5 and id&lt;=7;</span><br><span class="line"></span><br><span class="line">//not可以和in一起用</span><br><span class="line">select * from goods where id not in(4,5);</span><br><span class="line">等于：</span><br><span class="line">select * from goods where id!=4 and id!=5;</span><br><span class="line"></span><br><span class="line">模糊查询</span><br><span class="line">    like</span><br><span class="line">    %：通配任意字符</span><br><span class="line">    _：通配单个字符</span><br><span class="line"></span><br><span class="line">    注意，如果想要模糊查询，但是又没有通配符的时候，查询语句是没有报错的，</span><br><span class="line"></span><br><span class="line">但是，查询的结果可能是空的。如，</span><br><span class="line">select goods_id,goods_name from goods where goods_name like &apos;诺基亚&apos;;</span><br><span class="line">Empty set (0.00sec)</span><br><span class="line">//查询结果是空的，因为good_name中有“诺基亚”的商品都是有后缀的，没有单独</span><br><span class="line"></span><br><span class="line">的诺基亚商品，如诺基亚N85、诺基亚N96、诺基亚耳机等等。</span><br><span class="line">所以，要加通配符</span><br><span class="line">//查询任意字符用%，如查询有“诺基亚”的所有商品</span><br><span class="line">select goods_id, goods_name from goods where goods_name like &apos;诺基亚%&apos;</span><br><span class="line">//查询诺基亚N系列而且N后面是两个字符的商品，也就是Nxx系列。</span><br><span class="line">select goods_id, goods_name from goods where goods_name like &apos;诺基亚N__&apos;</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">group by</span><br><span class="line">    作用：把行按字段分组</span><br><span class="line"></span><br><span class="line">    max：求最大</span><br><span class="line">    min：求最小</span><br><span class="line">    sum：求总和</span><br><span class="line">    avg：求平均</span><br><span class="line">    count：求总行数</span><br><span class="line"></span><br><span class="line">//查询shop_price最大的商品的价格</span><br><span class="line">select max(shop_price) from goods;</span><br><span class="line">//下面的语句是没有意义的</span><br><span class="line">select goods_id, goods_name max(goods_price) from goods;</span><br><span class="line">    因为，goods_id和goods_name是第一列的值，而goods_price是最大值。查询出</span><br><span class="line"></span><br><span class="line">来的结果goods_id、goods_name和goods_price是不搭配的。</span><br><span class="line"></span><br><span class="line">//查询每个商品所积压的货款</span><br><span class="line">select goods_id, goods_name, goods_number*shop_price from goods;</span><br><span class="line">//查询该商店积压的总货款</span><br><span class="line">select sum(goods_number*shop_price) from goods;</span><br><span class="line"></span><br><span class="line">    我们的商品不但有goods_id号还有栏号cat_id，如果我们想查出每一栏目中价格</span><br><span class="line"></span><br><span class="line">最贵的商品，怎么查</span><br><span class="line">select cat_id, max(shop_price) from goods group by cat_id;</span><br><span class="line">    如果加good_id，goodd_id也是没有意义的。</span><br><span class="line">//按栏目查询最便宜的商品</span><br><span class="line">select cat_id, min(shop_price) from goods group by cat_id;</span><br><span class="line">//按栏目查询商品平均价格，也就是每一栏的平均价格</span><br><span class="line">select cat_id, avg(shop_price) from goods group by cat_id;</span><br><span class="line">//按栏目查询商品种类，也就是每个栏目下的商品种类</span><br><span class="line">select cat_id, count(*) from goods group by cat_id;</span><br><span class="line"></span><br><span class="line">//查询商品的平均价格</span><br><span class="line">select avg(good_price) from goods;</span><br><span class="line">//查询所有商品的数量，也就是求有多少行</span><br><span class="line">select count(*) from goods;</span><br><span class="line"></span><br><span class="line">    我们要养成一种思想：把列当成变量来看。</span><br><span class="line">//查询出本店每个商品比市场价格低多少钱</span><br><span class="line">select goods_id, goods_name, market_price - shop_price from goods;</span><br><span class="line">    注意，显示出来的结果是会有market_price - shop_price这一列的。</span><br><span class="line"></span><br><span class="line">//查询每个栏目下积压的货款，也就是库存*价格</span><br><span class="line">select cat_id, sum(shop_price*good_number) from goods group by cat_id;</span><br><span class="line">    我们可以看到查询结果有sum(shop_price*goods_number)这一列，不过列名实在是有点长，这时候，我们可以起一个别名，用as。</span><br><span class="line">select cat_id, sum(shop_price*good_number) as hk from goods group by</span><br><span class="line"></span><br><span class="line">cat_id;</span><br><span class="line">    这时候，我们查询结果看到的就是hk这一列代表积压货款。</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">having</span><br><span class="line"></span><br><span class="line">//查询出本店价格比市场价格低多少钱，并且把低200元以上的商品选出来</span><br><span class="line">//查询出本店价格比市场价格低多少钱，我们可以这样实现</span><br><span class="line">select goods_id, goods_name, sum(market_price-goods_price) as cheap from goods;</span><br><span class="line">//当你还想要把低于200元以上的商品选出来的时候，我们首先想到的是用where条件来实现，即</span><br><span class="line">select goods_id, goods_name, sum(market_price-goods_price) as cheap from goods where cheap&gt;200;</span><br><span class="line">结果：ERROR 1054 &lt;42S22&gt;: Unkown column &apos;cheap&apos; in &apos;where clause&apos;</span><br><span class="line">    注意，这样是不能够实习的！因为，where是对表起作用的，而不是对查询到的结果起作用。那么，我们要怎么样才能够实现：查询出本店价格比市场价格低多少钱，并且把低于200元以上的商品选出来呢？</span><br><span class="line"></span><br><span class="line">    方法一：</span><br><span class="line">select goods_id, goods_name, sum(market_price-goods_price) as cheap from goods where market_price-goods_price&gt;200;</span><br><span class="line">    这种方法可以实现，不过查询的时候计算了两次。注意，结果显示的是cheap列，而不是market_price-goods_price列。</span><br><span class="line"></span><br><span class="line">    方法二：</span><br><span class="line">    having，可以筛选查询的结果。</span><br><span class="line">select goods_id, goods_name, sum(market_price-goods_price) as cheap from goods having cheap&gt;200;</span><br><span class="line"></span><br><span class="line">//当一条语句有where和having，where在前</span><br><span class="line">//查询本店价格比市场价格低多少钱，并且把第3个栏目下比市场价格低于200元以上的商品选出来</span><br><span class="line">select goods_id, cat_id, goods_name, sum(market_price-goods_price) as cheap from goods where cat_id=3 having cheap&gt;200;</span><br><span class="line"></span><br><span class="line">//查询积压货款超过2W元的栏目，以及该栏目积压的货款</span><br><span class="line">//先查询栏目积压的货款</span><br><span class="line">select cat_id, sum(goods_number*shop_price) as jyhk from goods group by cat_id;</span><br><span class="line">//然后用having jyhk&gt;2W筛选积压货款超过2W的栏目</span><br><span class="line">select cat_id, sum(goods_number*shop_price) as jyhk from goods group by cat_id having jyhk&gt;2W;</span><br><span class="line"></span><br><span class="line">    总结：where针对表中的列发挥作用，查询数据；having针对查询结果中的列发挥作用，筛选数据。</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">练习：设有成绩表grades如下：</span><br><span class="line">姓名：张三  张三  张三  李四  李四  王五</span><br><span class="line">科目：数学  语文  地理  语文  政治  政治</span><br><span class="line">分数： 90    50    40    55    45    30</span><br><span class="line">    查询两门及两门以上不及格同学的平均分。要求只用一个select。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//先创建表grades</span><br><span class="line">create table grades (</span><br><span class="line">name varchar(10) not null default &apos;&apos;,</span><br><span class="line">subject varchar(10) not null default &apos;&apos;,</span><br><span class="line">score tinyint not null default 0</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">//插入数据</span><br><span class="line">insert into grades</span><br><span class="line">values</span><br><span class="line">(&apos;张三&apos;, &apos;数学&apos;, 90),</span><br><span class="line">(&apos;张三&apos;, &apos;语文&apos;, 50),</span><br><span class="line">(&apos;张三&apos;, &apos;地理&apos;, 40),</span><br><span class="line">(&apos;李四&apos;, &apos;语文&apos;, 55),</span><br><span class="line">(&apos;李四&apos;, &apos;政治&apos;, 45),</span><br><span class="line">(&apos;王五&apos;, &apos;政治&apos;, 30);</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from grades;</span><br><span class="line">+--------+---------+-------+</span><br><span class="line">| name   | subject | score |</span><br><span class="line">+--------+---------+-------+</span><br><span class="line">| 张三   | 数学    |    90 |</span><br><span class="line">| 张三   | 语文    |    50 |</span><br><span class="line">| 张三   | 地理    |    40 |</span><br><span class="line">| 李四   | 语文    |    55 |</span><br><span class="line">| 李四   | 政治    |    45 |</span><br><span class="line">| 王五   | 政治    |    30 |</span><br><span class="line">+--------+---------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">//先求每个人成绩的平均分</span><br><span class="line">mysql&gt; select name, avg(score) from grades group by name;</span><br><span class="line">+--------+------------+</span><br><span class="line">| name   | avg(score) |</span><br><span class="line">+--------+------------+</span><br><span class="line">| 张三   |    60.0000 |</span><br><span class="line">| 李四   |    50.0000 |</span><br><span class="line">| 王五   |    30.0000 |</span><br><span class="line">+--------+------------+</span><br><span class="line">3 rows in set (0.10 sec)</span><br><span class="line"></span><br><span class="line">//再查找有两门及两门以上不及格的同学</span><br><span class="line">select name, count(score&lt;60) as fail from grades group by name having fail&gt;=2;</span><br><span class="line">+--------+------+</span><br><span class="line">| name   | fail |</span><br><span class="line">+--------+------+</span><br><span class="line">| 张三   |    3 |</span><br><span class="line">| 李四   |    2 |</span><br><span class="line">+--------+------+</span><br><span class="line">2 rows in set (0.04 sec)</span><br><span class="line"></span><br><span class="line">//最后，合成一条select语句</span><br><span class="line">select name, avg(score), count(score&lt;60) as fail from grades group by name having fail&gt;=2;</span><br><span class="line">+--------+------------+------+</span><br><span class="line">| name   | avg(score) | fail |</span><br><span class="line">+--------+------------+------+</span><br><span class="line">| 张三   |    60.0000 |    3 |</span><br><span class="line">| 李四   |    50.0000 |    2 |</span><br><span class="line">+--------+------------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">    注意，这种做法看上去像是对的。其实，这是错误的做法。因为，查询结果显示张三挂了3科，其实他只挂了2科。count是计算所有行数，它不论大于还是小于60分的都计算了的。我们可以验证一下：</span><br><span class="line">insert into grades</span><br><span class="line">values</span><br><span class="line">(&apos;赵六&apos;, &apos;语文&apos;,99),</span><br><span class="line">(&apos;赵六&apos;, &apos;数学&apos;,98),</span><br><span class="line">(&apos;赵六&apos;, &apos;政治&apos;,97);</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from grades;</span><br><span class="line">+--------+---------+-------+</span><br><span class="line">| name   | subject | score |</span><br><span class="line">+--------+---------+-------+</span><br><span class="line">| 张三   | 数学    |    90 |</span><br><span class="line">| 张三   | 语文    |    50 |</span><br><span class="line">| 张三   | 地理    |    40 |</span><br><span class="line">| 李四   | 语文    |    55 |</span><br><span class="line">| 李四   | 政治    |    45 |</span><br><span class="line">| 王五   | 政治    |    30 |</span><br><span class="line">| 赵六   | 语文    |    99 |</span><br><span class="line">| 赵六   | 数学    |    98 |</span><br><span class="line">| 赵六   | 政治    |    97 |</span><br><span class="line">+--------+---------+-------+</span><br><span class="line">9 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">select name, avg(score), count(score&lt;60) as fail from grades group by name having fail&gt;=2;</span><br><span class="line">+--------+------------+------+</span><br><span class="line">| name   | avg(score) | fail |</span><br><span class="line">+--------+------------+------+</span><br><span class="line">| 张三   |    60.0000 |    3 |</span><br><span class="line">| 李四   |    50.0000 |    2 |</span><br><span class="line">| 赵六   |    98.0000 |    3 |</span><br><span class="line">+--------+------------+------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line">    我们可以看到count(score&lt;60)并不是计算score&lt;60的行数，而是计算所有行的行数。因为</span><br><span class="line">select name, score&lt;60 from grades;</span><br><span class="line">+--------+----------+</span><br><span class="line">| name   | score&lt;60 |</span><br><span class="line">+--------+----------+</span><br><span class="line">| 张三   |        0 |</span><br><span class="line">| 张三   |        1 |</span><br><span class="line">| 张三   |        1 |</span><br><span class="line">| 李四   |        1 |</span><br><span class="line">| 李四   |        1 |</span><br><span class="line">| 王五   |        1 |</span><br><span class="line">| 赵六   |        0 |</span><br><span class="line">| 赵六   |        0 |</span><br><span class="line">| 赵六   |        0 |</span><br><span class="line">+--------+----------+</span><br><span class="line">9 rows in set (0.00 sec)</span><br><span class="line">    score&lt;60的值不是0就是1，因为，score&lt;60不是真就是假的。但是，无论是0还是1，score&lt;60都有一行，而count(score&lt;60)是计算score&lt;60的行数。</span><br><span class="line">    所以，我们可以计算score&lt;60的值为1的行数来查看不及格的门数。</span><br><span class="line">select name, avg(score), sum(score&lt;60) as fail from grades group by name having fail&gt;=2;</span><br><span class="line">+--------+------------+------+</span><br><span class="line">| name   | avg(score) | fail |</span><br><span class="line">+--------+------------+------+</span><br><span class="line">| 张三   |    60.0000 |    2 |</span><br><span class="line">| 李四   |    50.0000 |    2 |</span><br><span class="line">+--------+------------+------+</span><br><span class="line">2 rows in set (0.02 sec)</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">order by</span><br><span class="line"></span><br><span class="line">    order by：排序功能，按一个或多个字段对查询结果进行排序，可以是升序排序，也可以是降序排序，默认是升序排序。</span><br><span class="line">select goods_id, cat_id, goods_name, shop_price from goods where cat_id=3</span><br><span class="line"></span><br><span class="line">order by shop_price;</span><br><span class="line">    这条语句查询显示的结果是按照shop_price的值由小到大排序的(默认升序)，如果我们想查询结果由降序排序，要怎么做呢？可以在后面加上字段名desc。</span><br><span class="line">    desc：按降序排序； asc：按升序排序(默认也是升序排序，所以可以不加)</span><br><span class="line">select goods_id, cat_id, goods_name, shop_price from goods where cat_id=3 order by shop_price desc;</span><br><span class="line"></span><br><span class="line">//查询栏目号从低到高，而且栏目内的商品价格从高到低的排序结果</span><br><span class="line">select goods_id, cat_id, goods_name, shop_price from goods where goods_id&lt;50 order by cat_id, shop_price desc; //先按cat_id排序，再在栏目内</span><br><span class="line"></span><br><span class="line">按shop_price从高到低排序</span><br><span class="line"></span><br><span class="line">//按发布时间从早到晚排序(发布时间add_time是用时间戳来存储的)</span><br><span class="line">select goods_id, goods_name, add_time from goods order by add_time;</span><br><span class="line">    我们可以看到add_time的值是int型的，表示1970-01-01 00:00:00 到当前的秒数。</span><br><span class="line"></span><br><span class="line">    我们可以按字段排序，查询显示的结果是符合条件所有行的数据。如果我们只是想要显示排序之后的某几行，又要怎么做呢？limit语句可以帮我们实现。</span><br><span class="line">    limit [offset] [n]</span><br><span class="line">    offset：偏移量，offset如果不写，则相当于0，即limit 0, n。所以，是从第offset+1个开始。如limit 3,2 表示偏移前3个，从第4个开始选择2个，即4、5</span><br><span class="line">    n：取出的条目</span><br><span class="line">//取出商品价格最贵的3个商品的信息</span><br><span class="line">select goods_id, cat_id, goods_name，shop_price from goods order by shop_price desc limit 3;</span><br><span class="line">//取出最新发布的商品</span><br><span class="line">select goods_id, cat_id, goods_name, add_time, shop_price from goods order by add_time desc limit 1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//取出每个栏目下最贵的商品</span><br><span class="line"></span><br><span class="line">错误一：</span><br><span class="line">select goods_id, cat_id, goods_name, max(shop_price) from goods;</span><br><span class="line">    这种做法查出来的是的确是shop_price最大的商品，不过shop_price不一定是和前面的goods_id, cat_id, goods_name是对应的。</span><br><span class="line"></span><br><span class="line">错误二：</span><br><span class="line">select goods_id, cat_id, goods_name, shop_price from goods group by cat_id order by shop_price desc;</span><br><span class="line">    这种做法也能查出每个栏目下的一个商品来，不过这个商品不一定是每个栏目下最贵的商品，这个商品只是每个栏目下的第一个商品。仔细观察我们可以发现查询结果中shop_price列的价格是按照从大到小来排序的，这就说明了，这条语句查询的结果是把每个栏目下的第一个商品拿出来，后面的order by shop_price desc实现的是对拿出来的每个栏目下的第一个商品按照shop_price从大到小排序。</span><br><span class="line"></span><br><span class="line">错误三：</span><br><span class="line">    根据上面的做法，有的同学就会想到：如果我先实现 order by shop_price desc 再来实现group by不就行了吗。</span><br><span class="line">select goods_id, cat_id, goods_name, shop_price from goods order by</span><br><span class="line"></span><br><span class="line">shop_price desc group by cai_id;</span><br><span class="line">    这种做法也一样是不正确的，因为：</span><br><span class="line">    select的5种子句：where、group by、having、order by、limit是按照顺序来使用的，不能把后面的子句放到前面来先使用。</span><br><span class="line"></span><br><span class="line">错误四：</span><br><span class="line">    有的同学可能会想，我先构造一张表goods1，表里面的数据是按照order by cat_id asc，shop_price desc顺序排列的，然后，再调用group by来取出每个栏目下的第一个商品不就行了吗。</span><br><span class="line">//创建表goods1</span><br><span class="line">create lzs.goods1 like goods;</span><br><span class="line">//将表goods的数据按照order by cat_id，shop_price desc顺序保存到goods1</span><br><span class="line">insert into goods1 select * from goods order by cat_id, shop_price desc;</span><br><span class="line">//最后，用group by取出每个栏目下的第一个商品就可以了</span><br><span class="line">select goods_id, cat_id, goods_name, shop_price from goods1 group by cat_id;</span><br><span class="line">    这种做法也是错误的，因为在将表goods的数据按照order by cat_id asc，</span><br><span class="line"></span><br><span class="line">shop_price desc顺序存进goods1的时候，保存进goods1的数据根本就没有按照想要的顺序排序，而是按照goods原来的顺序保存进来的。所以，最后group by取出来的数据还是不对的。</span><br><span class="line"></span><br><span class="line">    其实，我们不用创建一张新表，因为查询的结果本来就可以在内存中当作表来使用，所以我们可以这样实现：</span><br><span class="line">select * from (selcet goods_id, cat_id, goods_name, shop_price from goods order by cat_id asc, shop_price desc) as goods1 group by cat_id;</span><br><span class="line">    这种做法是from型子查询，但是，如果要求只用一个select，又要怎么去实现呢？</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">良好的理解模型：</span><br><span class="line">    where 表达式：把表达式放在行中，看表达式是否为真</span><br><span class="line">    列：理解成变量，可以运算</span><br><span class="line">    取出结果：可以理解成一张临时表</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">子查询</span><br><span class="line"></span><br><span class="line">    where型子查询：把内层查询的结果作为外层查询的比较条件</span><br><span class="line">    from型子查询：把内层查询的结果当成临时表，供外层再次查询</span><br><span class="line">    exists型子查询：把外层的查询结果，拿到内层，看内层的查询是否成立</span><br><span class="line"></span><br><span class="line">//查询最新的商品(以id最大为最新)</span><br><span class="line">select goods_id, cat_id, goods_name from goods order by goods_id desc limit 1;</span><br><span class="line">    如果，不能用order by呢？又要怎么做？我们可以用where子查询来实现：</span><br><span class="line">select goods_id, cat_id, goods_name from goods where goods_id = (select</span><br><span class="line"></span><br><span class="line">max(goods_id) from goods);</span><br><span class="line"></span><br><span class="line">//查询每个栏目下最贵的商品</span><br><span class="line">select goods_id, cat_id, goods_name shop_price from goods where shop_price in(select max(shop_price) from goods group by cat_id)</span><br><span class="line">//上面我们用from型子查询是这样实现的：</span><br><span class="line">select * from (select goods_id, cat_id, goods_name, shop_price from goods order by shop_price desc) as goods1 group by cat_id;</span><br><span class="line">    from型子查询，是先select内层order by shop_price desc查询的结果，然后利用group by cat_id来取出第一个。注意，from型子查询必须要给内层查询的结果加上一个别名。</span><br><span class="line">    而where型子查询，是选出每栏目下max(shop_price)的商品，如果一个栏目下有几个商品都是同价格的而且还是最贵的，这几个商品都是内层查询的结果来的，都是在in里面的值。所以，都是可以查询出来的。</span><br><span class="line"></span><br><span class="line">//利用上面的grades表，如何用子查询查出挂科两门及两门以上同学的平均分</span><br><span class="line">//不用子查询</span><br><span class="line">select name, avg(score), sum(score&lt;60) as fail from grades group by name having fail&gt;=2;</span><br><span class="line">//子查询</span><br><span class="line">//先查出挂机两门及两门以上的同学</span><br><span class="line">select name, sum(score&lt;60) as fail from grades group by name having fail&gt;=2;//不过，我们要的只是name，所以，还要选出name来：</span><br><span class="line">select name from (select name, sum(score&lt;60) as fail from grades group by name having fail&gt;=2);</span><br><span class="line">//最后根据名字查找平均分</span><br><span class="line">select name, avg(score) from grades where name in(select name from (select name, sum(score&lt;60) as fail from grades group by name having fail&gt;=2) as tmp) group by name;</span><br><span class="line">    注意，from型子查询必须要给内层查询的结果加上一个别名，所以，要as tmp</span><br><span class="line"></span><br><span class="line">//或者</span><br><span class="line">select name, avg(score) from grades where name in(select name from (select name, count(*) as fail from grades where score&lt;60 group by name having fail&gt;=2) as tmp) group by name;</span><br><span class="line"></span><br><span class="line">//查询有商品的栏目(栏目表名category)</span><br><span class="line">//我们先看一下，下面这条语句实现的是什么</span><br><span class="line">select cat_id, cat_name from category where exists(select * form goods);</span><br><span class="line">    显示的结果是：所有的cat_id，cat_name。因为，只要goods里面有内容，exists(select * from goods)就会为真，显示的结果就是所有的cat_id和cat_name。那么如果要查询有商品的栏目，我们只要将exists里面的判断设置为有商品就为真就可以了。</span><br><span class="line">select cat_id, cat_name from category where exists(select * from goods where goods.cat_id=category.cat_id);</span><br><span class="line">    exists(select * from goods where goods.cat_id=category.cat_id)的意思是，只要商品表goods里面有栏目表category相等的id就表示，有商品里面有该栏目的商品。</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">select的5中子句的总结：</span><br><span class="line"></span><br><span class="line">    where 表达式</span><br><span class="line">	表达式在哪一行成立，哪一行就取出来</span><br><span class="line">	where常用运算符：=，!=/&lt;&gt;，&lt;，&gt;，&lt;=，&gt;=，in()，between and</span><br><span class="line">	where逻辑运算符：and、or、not</span><br><span class="line">	模糊查询：like  通配符：%，任意字符；_，单个字符</span><br><span class="line"></span><br><span class="line">    group by：</span><br><span class="line">	分组，一般和统计函数配合使用</span><br><span class="line">	常用的统计函数：max()，min()，avg()，sum()，count()</span><br><span class="line"></span><br><span class="line">    having 表达式</span><br><span class="line">	数据在表中，表在硬盘或者内存以文件形式存在。</span><br><span class="line">	查询出的结果，也可以看成一张表，其文件一般临时存放在缓冲区。</span><br><span class="line">	where，针对表文件发挥作用；</span><br><span class="line">	having，针对查询结果发挥作用。</span><br><span class="line"></span><br><span class="line">    order by：</span><br><span class="line">	作用：对字段排序，可以升序asc，也可以降序desc。</span><br><span class="line">	有可能一个字段排不出结果，可以选用其它字段继续排序:</span><br><span class="line">	order by 字段1[asc/desc]， 字段2[asc/desc] ...</span><br><span class="line">	如，order by cat_id, shop_price desc</span><br><span class="line"></span><br><span class="line">    limit：</span><br><span class="line">	作用：限制条目</span><br><span class="line">	limit [offset] n</span><br><span class="line">	offset：偏移量，不填就是默认0</span><br><span class="line">	n：限制取出的条目数量</span><br><span class="line">	如，取出shop_price最贵的3个商品：</span><br><span class="line">	... order by shop_price desc limit 3;</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">select的子查询</span><br><span class="line"></span><br><span class="line">    where型子查询：</span><br><span class="line">	内层的查询结果作为外层查询的比较条件</span><br><span class="line">	例如，查询最新商品(以goods_id最大为最新)</span><br><span class="line">	select * from goods where goods_id = 最大的goods_id；</span><br><span class="line">	select * from goods where goods_id = (select max(goods_id) from goods);</span><br><span class="line"></span><br><span class="line">    from型子查询：</span><br><span class="line">	把内层的查询结果供外层再次查询。</span><br><span class="line">	注意，内层的查询结果看成临时表，要加&apos;as 临时表名&apos;</span><br><span class="line"></span><br><span class="line">    exists型子查询：</span><br><span class="line">	把外层的查询结果代入到内层，看内层是否成立。</span><br><span class="line">	例如，查询有商品的栏目</span><br><span class="line">	select cat_id, cat_name from category where exists(select * from goods.cat_id=category.cat_id);</span><br><span class="line">	如果select * from goods where goods.cat_id;的结果有值就说明 cat_id 有商品。</span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/mysql/">mysql</a></div><div class="post-nav"><a href="/2015/06/01/others/lizsgh.github.io/" class="pre">lizsgh.github.io</a><a href="/2015/04/04/mysql/column_types/" class="next">MySQL - Column types</a></div></div><!-- include _partial/footer--></div></div></div><a id="totop" href="#top"></a></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script></body></html>