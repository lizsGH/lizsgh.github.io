<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="www.lizs.cc"><meta name="keywords" content="lizs, www.lizs.cc, lizs.cc"><title>MySQL - Index - lizs</title><!-- link(rel="stylesheet", type="text/css", href="//fonts.neworld.org/css?family=Source+Code+Pro")--><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><!-- #header--><div id="layout" class="layout-g"><div class="layout-r"><div id="sidebar"><div class="site-name"><h1 class="title"><a href="/." class="home">lizs</a></h1><!-- h1.hidden= current_title--><!-- a#logo(href=url_for('.'))= config.title--><p class="description">www.lizs.cc</p></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="www.lizs.cc"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="time">{date}</div><div class="title">{title}</div><!-- .tags {tags}--></a></div></template></div></div><!-- .search-pla--><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#索引简介"><span class="toc-text">索引简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#索引的优缺点"><span class="toc-text">索引的优缺点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#索引分类"><span class="toc-text">索引分类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#普通索引"><span class="toc-text">普通索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#唯一索引"><span class="toc-text">唯一索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#主键索引"><span class="toc-text">主键索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#全文索引"><span class="toc-text">全文索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#组合索引-复合索引"><span class="toc-text">组合索引 (复合索引)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#索引的使用"><span class="toc-text">索引的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么时候使用索引？"><span class="toc-text">什么时候使用索引？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#什么时候不要使用索引？"><span class="toc-text">什么时候不要使用索引？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#索引使用注意事项"><span class="toc-text">索引使用注意事项</span></a></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 近期文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/12/01/others/jetbrains_activate/">JetBrains 系列产品激活</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/01/python/abstract_base_classes/">Python - Abstract Base Classes</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/05/linux/centos6.6_upgrade_python2.6/">CentOS6.6 upgrade Python2.6 to Python2.7</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/05/linux/centos6.6_deploy_php_mysql_nginx/">CentOS6.6 install PHP, MySQL and Nginx</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/05/linux/cmd_netstat/">Linux command - netstat</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/03/python/http_server/">Python - HTTP Server</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cordova/">Cordova</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP/IP</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/cmd/" style="font-size: 15px;">cmd</a> <a href="/tags/cordova/" style="font-size: 15px;">cordova</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/tutorial/" style="font-size: 15px;">tutorial</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/others/" style="font-size: 15px;">others</a> <a href="/tags/tcp-ip/" style="font-size: 15px;">tcp/ip</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/django/" style="font-size: 15px;">django</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li></ul></div><div id="nav-menu"></div></div></div><div class="layout-l"><div class="content_container"><div class="post"><div class="header"><h1 class="post-title">MySQL - Index</h1><div class="post-meta"><p><span class="date">2017-01-01</span><span><a href="/categories/MySQL/" class="category">MySQL</a></span><span class="view_count"><i id="busuanzi_container_page_pv"><!-- i=  __('hits') + '数: '--><i id="busuanzi_value_page_pv"></i></i></span></p></div></div><div class="post-content"><h1 id="索引简介"><a href="#索引简介" class="headerlink" title="索引简介"></a>索引简介</h1><p>MySQL 索引是一中特殊的文件，它们包含着对数据表所有记录的引用指针。就像书本的目录一样，在没有索引的情况下，数据库会遍历所有相关记录，找出符合条件的记录；而有索引之后，数据库会先在索引中查找，再定位到具体的物理位置去除数据信息。</p>
<p>查看表中的索引信息：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW INDEX FROM `table_name` \G;</span><br></pre></td></tr></table></figure></p>
<h2 id="索引的优缺点"><a href="#索引的优缺点" class="headerlink" title="索引的优缺点"></a>索引的优缺点</h2><p><strong>优点</strong>：</p>
<ul>
<li>索引可以加快数据库检索速度</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>索引本身也是表，因此会占用存储空间。</li>
<li>数据库的添加、修改、删除等操作的效率会降低，因为同时需要维护索引表。</li>
</ul>
<h1 id="索引分类"><a href="#索引分类" class="headerlink" title="索引分类"></a>索引分类</h1><p>常见的索引有：普通索引、主键索引、唯一索引、组合索引、全文索引、空间索引等。</p>
<h2 id="普通索引"><a href="#普通索引" class="headerlink" title="普通索引"></a>普通索引</h2><p>普通索引是最基本的索引，一个列组成一个索引，基本没有任何限制，一张表中可以有多个普通索引。普通索引主要是为了加快查找速度。</p>
<ul>
<li><p>创建表的时候同时创建普通索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> CREATE TABLE `users` (</span><br><span class="line">   `id` int(11) NOT NULL,</span><br><span class="line">`name` varchar(32) NOT NULL,</span><br><span class="line">INDEX `index_name` (name(16))</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
<p>在<code>name</code>创建普通索引<code>index_name</code>，<code>(16)</code>表示用<code>name</code>列的前 16 个字符创建索引，不指定长度 (如<code>INDEX index_name (name)</code>)，则使用列的完整值。<br>建立索引的时候，很多时候不必要使用相应列定义的长度，如果前一部分的值具有唯一性，则只截取前面一部份值影响也不大 (如这里的<code>name</code>一般不会超过 10 个字符)。这样会加速索引查询速度，而且还减少索引文件的大小，提高插入修改的速度等。</p>
</li>
<li><p>创建表之后添加索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX `index_name` ON users(name(32));</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">ALTER TABLE `users` ADD INDEX index_name(`name`);</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX `index_name` ON `users`;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h2><p>唯一索引，与普通索引类似。不过，索引列的值必须唯一，但可以为空值，而且每列的空值可以有多个。</p>
<ul>
<li><p>创建表的时候指定唯一索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> CREATE TABLE `users` (</span><br><span class="line">   `id` int NOT NULL,</span><br><span class="line">`name` varchar(32) NOT NULL,</span><br><span class="line">UNIQUE `index_name` (`name`),</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建表之后添加索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE UNIQUE INDEX `index_name` ON `users` (`name`);</span><br><span class="line"><span class="comment"># Or</span></span><br><span class="line">ALTER TABLE `users` ADD UNIQUE `index_name` (`name`);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="主键索引"><a href="#主键索引" class="headerlink" title="主键索引"></a>主键索引</h2><p>即主键，一张表中只能够有一个主键，并且不允许重复值和空值。主键索引可以加速查找和唯一约束。</p>
<ul>
<li><p>创建表的时候添加主键索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> CREATE TABLE `users` (</span><br><span class="line">   `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">`name` varchar(32) NOT NULL,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line"> );</span><br><span class="line"> <span class="comment"># Or</span></span><br><span class="line"> CREATE TABLE `users` (</span><br><span class="line">   `id`  int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">`name` varchar(32) NOT NULL</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建表之后添加主键索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE `users` ADD PRIMARY KEY(`id`);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<p><strong>普通索引、唯一索引和主键索引比较</strong>：</p>
<ul>
<li>三者都是单列索引，即索引只能由一列组成</li>
<li>主键索引，每张表只能有一个，不能为空值，而且值不能够重复</li>
<li>唯一索引，每张表可以有多个，可以设置为空值，而且每列可以出现多个空值，但是不为空的值不能重复。</li>
<li>普通索引，基本没什么限制。每张表可以有多个，而且不为空的值能够重复。</li>
</ul>
<hr>
<h2 id="全文索引"><a href="#全文索引" class="headerlink" title="全文索引"></a>全文索引</h2><p>当需要根据文本中的关键字来检索的时候，普通的索引就无效了，如果不用索引而且数据量很大的话，全表检索将消耗太多的时间，这时候，可以使用 FULLTEXT 索引。</p>
<p>如上面的<code>users</code>表，当插入大量的数据的时候，执行查找语句：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `users` WHERE `name` LIKE <span class="string">'lizs%'</span> \G;</span><br><span class="line"><span class="comment"># 当检索关键字的时候，普通索引并不生效</span></span><br><span class="line">SELECT * FROM `users` WHERE `name` LIKE <span class="string">'%lizs%'</span> \G;</span><br></pre></td></tr></table></figure></p>
<p>这时候，就需要使用 FULLTEXT 索引了。</p>
<p>只有<code>InnoDB</code> (MySQL5.6开始支持)和<code>MyISAM</code>的<code>CHAR</code>，<code>VARCHAE</code>和<code>TEXT</code>列支持 FULLTEXT 索引。MySQL 5.7.6 开始支持中文的全文索引。</p>
<ul>
<li><p>创建表的时候添加全文索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> CREATE TABLE `users` (</span><br><span class="line">   `id` int NOT NULL AUTO_INCREMENT,</span><br><span class="line">`name` varchar(32) NOT NULL,</span><br><span class="line">PRIMARY KEY (`id`),</span><br><span class="line">FULLTEXT (`name`),</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建表之后添加索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE FULLTEXT INDEX `index_name` ON `users` (`name`);</span><br><span class="line"><span class="comment"># Or</span></span><br><span class="line">ALTER TABLE `users` ADD FULLTEXT `index_name` (`name`);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="组合索引-复合索引"><a href="#组合索引-复合索引" class="headerlink" title="组合索引 (复合索引)"></a>组合索引 (复合索引)</h2><blockquote>
<p>MySQL 查询只会使用一个索引，所以当频繁使用多个列作为查询条件的时候，建立多个索引来优化查询速度也只有前面一个有效，查询速度优化不理想。这时候，可以考虑使用组合索引。</p>
</blockquote>
<p>组合索引遵循<strong>最左前缀</strong>原则。如，组合索引<code>(a, b, c)</code>只有查询条件为<code>a</code>, <code>a, b</code>, <code>a, b, c</code>才会使用索引。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table_name WHERE b=<span class="string">'x'</span> AND c=<span class="string">'x'</span>;  <span class="comment"># Extra: Using where</span></span><br><span class="line">SELECT * FROM table_name WHERE a=<span class="string">'x'</span>;  <span class="comment"># Extra: Using index condition</span></span><br><span class="line">SELECT * FROM table_name WHERE a=<span class="string">'x'</span> AND b=<span class="string">'x'</span>;  <span class="comment"># Extra: Using index condition</span></span><br><span class="line">SELECT * FROM table_name WHERE a=<span class="string">'x'</span> AND b=<span class="string">'x'</span> AND c=<span class="string">'x'</span>;  <span class="comment"># Extra: Using index condition</span></span><br></pre></td></tr></table></figure></p>
<p>组合索引中，如果列中含有 NULL 值，那么这一列对于此组合索引就是无效的。所以，在数据库设计时，对于需要有可能使用组合索引的列，不要设置默认值为 NULL。</p>
<ul>
<li><p>创建表的时候添加组合索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> CREATE TABLE `users` (</span><br><span class="line">   `id` int NOT NULL AUTO_INCREMENT, </span><br><span class="line">`name` varchar(32) NOT NULL,</span><br><span class="line">`city` varchar(32) NOT NULL,</span><br><span class="line">PRIMARY KEY (`id`),</span><br><span class="line">INDEX index_name_city (name(16), city)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建表之后添加索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX index_name_city ON `users` (name(16), city(16));</span><br><span class="line"><span class="comment"># Or</span></span><br><span class="line">ALTER TABLE `users` ADD INDEX index_name_city (name(16), city(16));</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>删除索引</strong>：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX index_name ON table_name;</span><br></pre></td></tr></table></figure></p>
<h2 id="索引的使用"><a href="#索引的使用" class="headerlink" title="索引的使用"></a>索引的使用</h2><h3 id="什么时候使用索引？"><a href="#什么时候使用索引？" class="headerlink" title="什么时候使用索引？"></a>什么时候使用索引？</h3><ul>
<li>经常作为查询条件在<code>WHERE</code>子句中出现的列最好建立索引</li>
<li>经常用来排序在<code>ORDER BY</code>子句中出现的列最好建立索引</li>
<li>查询中与其它表关联的字段，外键关系建立索引</li>
<li>高并发条件下倾向组合索引</li>
</ul>
<h3 id="什么时候不要使用索引？"><a href="#什么时候不要使用索引？" class="headerlink" title="什么时候不要使用索引？"></a>什么时候不要使用索引？</h3><ul>
<li>经常增删改的列</li>
<li>有大量重复值的列</li>
<li>表数据不多的情况下也不建议使用索引</li>
</ul>
<h3 id="索引使用注意事项"><a href="#索引使用注意事项" class="headerlink" title="索引使用注意事项"></a>索引使用注意事项</h3><ul>
<li>组合索引中，如果列中含有 NULL 值，那么这一列对于此组合索引就是无效的。所以，在数据库设计时，对于需要有可能使用组合索引的列，不要设置默认值为 NULL。</li>
<li>定义索引的时候，如果可能应该指定前缀长度。如果索引列的值的前一部份具有唯一性，合理指定索引的前缀长度，不但可以提高查询速度，还可以提高插入修改的速度，而且还节省了索引占用的磁盘空间。</li>
<li>MySQL 查询只使用一个索引。因此，如果<code>WHERE</code>子句中使用了索引的话，<code>ORDER BY</code>排序子句就不会使用索引了。或者多列排序的时候，只有前面一个索引生效，所以在一定要使用多列排序的情况下，最好创建组合索引。</li>
<li>在查询条件中使用<code>&lt;&gt;</code>，<code>IS NULL</code>会导致索引失效</li>
<li>在查询中使用<code>OR</code>连接多个查询条件会导致索引失效，这时候可以分多次<code>SELECT</code>，然后用<code>UNION ALL</code>连接起来。</li>
</ul>
</div><div class="tags"><a href="/tags/mysql/">mysql</a></div><div class="post-nav"><a href="/2017/01/01/others/design_pattern/" class="pre">常用设计模式</a><a href="/2017/01/01/mysql/engines/" class="next">MySQL - Engines</a></div></div><!-- include _partial/footer--></div></div></div><a id="totop" href="#top"></a></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script></body></html>